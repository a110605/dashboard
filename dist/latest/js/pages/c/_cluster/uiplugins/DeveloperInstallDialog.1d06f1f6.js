(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/DeveloperInstallDialog"],{"241ca":function(a,t,e){var n=e("4bad");t=n(!1),t.push([a.i,".plugin-install-dialog[data-v-4a564711]{padding:10px}.plugin-install-dialog h4[data-v-4a564711]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-4a564711]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-4a564711]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-4a564711]{flex:1}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-4a564711]{display:flex;align-items:center;cursor:pointer;margin:10px 0}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-4a564711]:hover{text-decoration:none;color:var(--link)}.plugin-install-dialog .dialog-panel .version-selector[data-v-4a564711]{margin:0 10px 10px 10px;width:auto}.plugin-install-dialog .dialog-buttons[data-v-4a564711]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-4a564711]>:not(:last-child){margin-right:10px}",""]),a.exports=t},3149:function(a,t,e){var n=e("241ca");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var l=e("499e").default;l("3826bca6",n,!0,{sourceMap:!1,shadowMode:!1})},8217:function(a,t,e){"use strict";e("3149")},9744:function(a,t,e){"use strict";e.r(t);e("b0c0");var n=function(){var a=this,t=a._self._c;return a.showModal?t("app-modal",{attrs:{name:"developerInstallPluginDialog",height:"auto",scrollable:!0},on:{close:function(t){return a.closeDialog()}}},[t("div",{staticClass:"plugin-install-dialog"},[t("h4",[a._v("\n      "+a._s(a.t("plugins.developer.title"))+"\n    ")]),a._v(" "),t("p",[a._v("\n      "+a._s(a.t("plugins.developer.prompt"))+"\n    ")]),a._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"label-key":"plugins.developer.fields.url"},on:{input:a.updateLocation},model:{value:a.location,callback:function(t){a.location=t},expression:"location"}})],1)]),a._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledInput",{attrs:{"label-key":"plugins.developer.fields.name"},on:{input:a.updateName},model:{value:a.name,callback:function(t){a.name=t},expression:"name"}})],1),a._v(" "),t("div",{staticClass:"fields mt-10"},[t("Checkbox",{attrs:{"label-key":"plugins.developer.fields.persist"},model:{value:a.persist,callback:function(t){a.persist=t},expression:"persist"}})],1),a._v(" "),t("div",{staticClass:"dialog-buttons mt-20"},[t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"dev-install-ext-modal-cancel-btn"},on:{click:function(t){return a.closeDialog()}}},[a._v("\n          "+a._s(a.t("generic.cancel"))+"\n        ")]),a._v(" "),t("AsyncButton",{attrs:{mode:"load","data-testid":"dev-install-ext-modal-install-btn"},on:{click:a.loadPlugin}})],1)])])]):a._e()},l=[],i=e("53ca"),o=e("1da1"),s=e("a34a"),c=e.n(s),d=(e("96cf"),e("99af"),e("a15b"),e("67c9")),r=e("84d3"),u=e("bd30"),p=e("a788"),g=e("7600"),m=e("8dbe"),v={components:{AsyncButton:d["b"],Checkbox:u["a"],LabeledInput:r["a"],AppModal:m["a"]},data:function(){return{name:"",location:"",persist:!1,canModifyName:!0,canModifyLocation:!0,showModal:!1}},watch:{name:function(a,t){this.canModifyLocation&&(this.location="/pkg/".concat(a,"/").concat(a,".umd.min.js"))},location:function(a,t){if(this.canModifyName){var e=a.split("/"),n=e[e.length-1],l=n.indexOf(".umd.min.js");-1!==l?n=n.substr(0,l):(l=n.indexOf(".umd.js"),-1!==l&&(n=n.substr(0,l))),this.name=n}}},methods:{showDialog:function(){this.showModal=!0},closeDialog:function(a){this.showModal=!1,this.$emit("closed",a)},updateName:function(a){this.canModifyName=0===a.length},updateLocation:function(a){this.canModifyLocation=0===a.length},loadPlugin:function(a){var t=this;return Object(o["a"])(c.a.mark((function e(){var n,l,o,s,d,r,u,m;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.name,l=t.location,n||(o=l.split("/"),s=o[o.length-1],n=s.split(".")[0]),d="0.0.1",r=n,u=n.split("-"),u.length>=2&&(d=u.pop(),r=u.join("-")),!t.persist){e.next=20;break}return e.next=10,t.$store.dispatch("management/create",{type:p["ab"],metadata:{name:n,namespace:g["h"]},spec:{plugin:{name:r,version:d,endpoint:l,noCache:!0,metadata:{developer:"true",direct:"true"}}}});case 10:return m=e.sent,e.prev=11,e.next=14,m.save({url:"/v1/".concat(p["ab"]),method:"POST"});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](11),console.error("Could not create CRD for plugin",e.t0),a(!1);case 20:t.$plugin.loadAsync(n,l).then((function(){t.closeDialog(!0),t.$store.dispatch("growl/success",{title:t.t("plugins.success.title",{name:n}),message:t.t("plugins.success.message"),timeout:3e3},{root:!0}),a(!0)})).catch((function(e){a(!1);var n="object"===Object(i["a"])(e)?t.t("plugins.error.message"):e;t.$store.dispatch("growl/error",{title:t.t("plugins.error.title"),message:n,timeout:5e3},{root:!0})}));case 21:case"end":return e.stop()}}),e,null,[[11,16]])})))()}}},f=v,h=(e("8217"),e("0c7c")),b=Object(h["a"])(f,n,l,!1,null,"4a564711",null);t["default"]=b.exports}}]);
//# sourceMappingURL=DeveloperInstallDialog.1d06f1f6.js.map