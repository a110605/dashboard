(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/UninstallDialog"],{"63d5":function(t,e,n){"use strict";n("b5d0")},"94afb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return t.showModal?e("app-modal",{attrs:{name:"uninstallPluginDialog",height:"auto",scrollable:!0},on:{close:function(e){return t.closeDialog(!1)}}},[t.plugin?e("div",{staticClass:"plugin-install-dialog"},[e("h4",{staticClass:"mt-10"},[t._v("\n      "+t._s(t.t("plugins.uninstall.title",{name:t.plugin.label}))+"\n    ")]),t._v(" "),e("div",{staticClass:"mt-10 dialog-panel"},[e("div",{staticClass:"dialog-info"},[e("p",[t._v("\n          "+t._s(t.plugin.catalog?t.t("plugins.uninstall.custom"):t.t("plugins.uninstall.prompt"))+"\n        ")])]),t._v(" "),e("div",{staticClass:"dialog-buttons"},[e("button",{staticClass:"btn role-secondary",attrs:{disabled:t.busy,"data-testid":"uninstall-ext-modal-cancel-btn"},on:{click:function(e){return t.closeDialog(!1)}}},[t._v("\n          "+t._s(t.t("generic.cancel"))+"\n        ")]),t._v(" "),e("AsyncButton",{attrs:{mode:"uninstall","data-testid":"uninstall-ext-modal-uninstall-btn"},on:{click:function(e){return t.uninstall()}}})],1)])]):t._e()]):t._e()},i=[],l=(n("a4d3"),n("e439"),n("dbb4"),n("1da1")),o=n("ade3"),s=n("a34a"),r=n.n(s),c=(n("96cf"),n("b0c0"),n("4de4"),n("d3b7"),n("159b"),n("99af"),n("b64b"),n("2f62")),u=n("8dbe"),d=n("67c9"),p=n("a788"),g=n("7600"),f=n("fa98");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={components:{AsyncButton:d["b"],AppModal:u["a"]},data:function(){return{plugin:void 0,busy:!1}},computed:b({},Object(c["b"])({allCharts:"catalog/charts"})),methods:{showDialog:function(t){this.plugin=t,this.busy=!1,this.showModal=!0},closeDialog:function(t){this.showModal=!1,this.$emit("closed",t)},uninstall:function(){var t=this;return Object(l["a"])(r.a.mark((function e(){var n,a,i,l;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.busy=!0,a=t.plugin,t.$emit("update",a.name,"uninstall"),!(null!==(n=a.uiplugin)&&void 0!==n&&n.isDeveloper||a.catalog&&a.uiplugin)){e.next=6;break}return e.next=6,a.uiplugin.remove();case 6:return e.next=8,t.$store.dispatch("management/findAll",{type:p["f"].APP});case 8:if(i=e.sent,l=i.filter((function(e){if(a.catalog&&e.namespace===g["h"]){var n=t.allCharts.filter((function(t){var e,n;return t.repoName===(null===(e=a.repo)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.name)}));return n.some((function(t){return t.chartName===e.metadata.name}))}return e.namespace===g["h"]&&e.name===a.name&&e})),!a.catalog){e.next=13;break}return e.next=13,t.removePluginImageResources(a.uiplugin);case 13:if(!l.length){e.next=17;break}try{l.forEach((function(t){return t.remove()}))}catch(o){t.$store.dispatch("growl/error",{title:t.t("plugins.error.generic"),message:o.message?o.message:o,timeout:1e4},{root:!0})}return e.next=17,t.$store.dispatch("management/findAll",{type:p["f"].OPERATION});case 17:t.closeDialog(a);case 18:case"end":return e.stop()}}),e)})))()},removePluginImageResources:function(t){var e=this;return Object(l["a"])(r.a.mark((function n(){var a,i,l,o,s,c,u,d;return r.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l="".concat(g["g"].CATALOG_IMAGE,"=").concat(null===(a=t.metadata)||void 0===a||null===(i=a.labels)||void 0===i?void 0:i[g["g"].CATALOG_IMAGE]),o=g["h"],!l){n.next=7;break}return n.next=5,Object(f["a"])({deployment:e.$store.dispatch("management/findMatching",{type:p["fb"].DEPLOYMENT,selector:l,namespace:o}),service:e.$store.dispatch("management/findMatching",{type:p["U"],selector:l,namespace:o}),repo:e.$store.dispatch("management/findMatching",{type:p["f"].CLUSTER_REPO,selector:l})});case 5:for(s=n.sent,c=0,u=Object.keys(s);c<u.length;c++)d=u[c],s[d]&&s[d].forEach((function(t){return t.remove()}));case 7:case"end":return n.stop()}}),n)})))()}}},v=h,y=(n("63d5"),n("0c7c")),O=Object(y["a"])(v,a,i,!1,null,"032856cf",null);e["default"]=O.exports},b5d0:function(t,e,n){var a=n("b9cc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("499e").default;i("1768732f",a,!0,{sourceMap:!1,shadowMode:!1})},b9cc:function(t,e,n){var a=n("4bad");e=a(!1),e.push([t.i,".plugin-install-dialog[data-v-032856cf]{padding:10px}.plugin-install-dialog h4[data-v-032856cf]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-032856cf]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-032856cf]{flex:1}.plugin-install-dialog .dialog-buttons[data-v-032856cf]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-032856cf]>:not(:last-child){margin-right:10px}",""]),t.exports=e}}]);
//# sourceMappingURL=UninstallDialog.258ca200.js.map