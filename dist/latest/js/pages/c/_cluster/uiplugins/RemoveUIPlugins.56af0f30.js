(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/RemoveUIPlugins"],{"093f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return e.isDialogActive?t("Dialog",{attrs:{name:"confirm-uiplugins-remove",title:e.t("plugins.setup.remove.title"),mode:"disable","data-testid":"disable-ext-modal"},on:{okay:e.doRemove,closed:function(t){e.isDialogActive=!1}}},[[t("p",[e._v("\n      "+e._s(e.t("plugins.setup.remove.prompt"))+"\n    ")]),e._v(" "),e.defaultRepo?t("div",{staticClass:"mt-20"},[t("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.registry.title","data-testid":"disable-ext-modal-remove-repo"},model:{value:e.removeRepo,callback:function(t){e.removeRepo=t},expression:"removeRepo"}}),e._v(" "),t("div",{staticClass:"checkbox-info"},[e._v("\n        "+e._s(e.t("plugins.setup.remove.registry.prompt"))+"\n      ")])],1):e._e(),e._v(" "),e.hasPluginsInstalled?t("div",{staticClass:"mt-20"},[t("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.crd.title"},model:{value:e.removeCRD,callback:function(t){e.removeCRD=t},expression:"removeCRD"}}),e._v(" "),t("div",{staticClass:"checkbox-info"},[e._v("\n        "+e._s(e.t("plugins.setup.remove.crd.prompt"))+"\n      ")])],1):e._e()]],2):e._e()},o=[],r=a("2909"),s=a("1da1"),i=a("a34a"),c=a.n(i),l=(a("96cf"),a("7db0"),a("d3b7"),a("b0c0"),a("e6cf"),a("4de4"),a("a788")),u=a("e5e4"),d=a("bd30"),p=a("7600"),f={components:{Checkbox:d["a"],Dialog:u["a"]},fetch:function(){var e=this;return Object(s["a"])(c.a.mark((function t(){var a,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["management/schemaFor"](l["f"].CLUSTER_REPO)){t.next=5;break}return t.next=3,e.$store.dispatch("management/findAll",{type:l["f"].CLUSTER_REPO,opt:{force:!0}});case 3:a=t.sent,e.defaultRepo=a.find((function(e){return e.name===p["b"]&&e.spec.gitRepo===p["c"]}));case 5:if(!e.$store.getters["management/schemaFor"](l["ab"])){t.next=11;break}return t.next=8,e.$store.dispatch("management/findAll",{type:l["ab"]});case 8:n=t.sent,e.hasPluginsInstalled=(n||[]).length>0,e.removeCRD=!e.hasPluginsInstalled;case 11:case"end":return t.stop()}}),t)})))()},data:function(){return{errors:[],defaultRepo:void 0,removeRepo:!1,removeCRD:!0,hasPluginsInstalled:!1,isDialogActive:!1}},methods:{removeChart:function(e){var t=this;return Object(s["a"])(c.a.mark((function a(){var n,o;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("management/findAll",{type:l["f"].APP});case 2:if(n=a.sent,o=n.find((function(t){return t.namespace===p["h"]&&t.name===e})),!o){a.next=6;break}return a.abrupt("return",o.remove());case 6:return a.abrupt("return",Promise.reject(new Error("Could not find chart ยง{ name }")));case 7:case"end":return a.stop()}}),a)})))()},showDialog:function(){this.removeRepo=!!this.defaultRepo,this.isDialogActive=!0},doRemove:function(e){var t=this;return Object(s["a"])(c.a.mark((function a(){var n,o,s;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.errors=[],n=Object(r["a"])(p["e"]).reverse(),t.removeCRD||(n=n.filter((function(e){return e!==p["i"]}))),o=0;case 4:if(!(o<n.length)){a.next=17;break}return s=n[o],a.prev=6,a.next=9,t.removeChart(s);case 9:a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](6),t.errors.push(a.t0.message);case 14:o++,a.next=4;break;case 17:if(!t.removeRepo||!t.defaultRepo){a.next=26;break}return a.prev=18,a.next=21,t.defaultRepo.remove();case 21:a.next=26;break;case 23:a.prev=23,a.t1=a["catch"](18),t.errors.push(a.t1.message);case 26:return t.$store.dispatch("management/forgetType",l["ab"]),a.next=29,new Promise((function(e){return setTimeout(e,5e3)}));case 29:t.$emit("done"),e(!0);case 31:case"end":return a.stop()}}),a,null,[[6,11],[18,23]])})))()}}},m=f,v=(a("818f"),a("0c7c")),b=Object(v["a"])(m,n,o,!1,null,"63b06deb",null);t["default"]=b.exports},"0c44":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".enable-plugin-support[data-v-63b06deb]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-63b06deb]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-63b06deb]{margin-left:20px;opacity:.7}",""]),e.exports=t},"1f19":function(e,t,a){"use strict";a("5827")},5827:function(e,t,a){var n=a("c962");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("499e").default;o("727c343c",n,!0,{sourceMap:!1,shadowMode:!1})},"818f":function(e,t,a){"use strict";a("b1a5")},b1a5:function(e,t,a){var n=a("0c44");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("499e").default;o("6c6f3c82",n,!0,{sourceMap:!1,shadowMode:!1})},c962:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".modal-dialog[data-v-559afa2c]{padding:10px}.modal-dialog h4[data-v-559afa2c]{font-weight:700}.modal-dialog .dialog-buttons[data-v-559afa2c]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-559afa2c]>:not(:last-child){margin-right:10px}",""]),e.exports=t},e5e4:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;return t("app-modal",{attrs:{name:e.name,height:"auto",scrollable:!0},on:{"before-open":e.beforeOpen,close:function(t){return e.closeDialog(!1)}}},[t("div",{staticClass:"modal-dialog"},[t("h4",[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),e._t("default"),e._v(" "),t("div",{staticClass:"dialog-buttons mt-20"},[e._t("buttons"),e._v(" "),e.$slots.buttons?e._e():t("div",[t("button",{staticClass:"btn role-secondary",on:{click:function(t){return e.closeDialog(!1)}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),e.mode?t("AsyncButton",{staticClass:"ml-10",attrs:{mode:e.mode},on:{click:e.ok}}):t("button",{staticClass:"btn role-primary ml-10",on:{click:function(t){return e.closeDialog(!0)}}},[e._v("\n          "+e._s(e.t("generic.ok"))+"\n        ")])],1)],2)],2)])},o=[],r=a("67c9"),s=a("8dbe"),i={components:{AsyncButton:r["b"],AppModal:s["a"]},props:{name:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:""}},data:function(){return{closed:!1}},methods:{beforeOpen:function(){this.closed=!1},ok:function(e){var t=this,a=function(a){e(a),a&&t.closeDialog(!0)};this.$emit("okay",a)},closeDialog:function(e){this.closed||(this.$emit("closed",e),this.closed=!0)}}},c=i,l=(a("1f19"),a("0c7c")),u=Object(l["a"])(c,n,o,!1,null,"559afa2c",null);t["a"]=u.exports}}]);
//# sourceMappingURL=RemoveUIPlugins.56af0f30.js.map