(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog36","dialog21"],{"1731b":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".body div[data-v-70733c14]:not(:last-of-type){padding-bottom:15px}.body .retained-machine[data-v-70733c14]{display:flex;flex-direction:column}",""]),e.exports=t},"7c9c":function(e,t,a){var n=a("9c5c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("499e").default;r("1c9aafd5",n,!0,{sourceMap:!1,shadowMode:!1})},"9c5c":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".prompt-restore[data-v-6a47a020]{margin:0}.bottom[data-v-6a47a020]{display:flex;flex-direction:column;flex:1}.bottom .banner[data-v-6a47a020]{margin-top:0}.bottom .buttons[data-v-6a47a020]{display:flex;justify-content:flex-end;width:100%}",""]),e.exports=t},a70e:function(e,t,a){var n=a("1731b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("499e").default;r("ac3110b8",n,!0,{sourceMap:!1,shadowMode:!1})},a90a:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("GenericPrompt",e._b({on:{close:function(t){return e.$emit("close")}}},"GenericPrompt",e.config,!1),[t("template",{slot:"body"},[t("div",{staticClass:"pl-10 pr-10 mt-20 mb-20 body"},[1===e.allToDelete.length?t("div",[e._v("\n        "+e._s(e.t("promptRemove.attemptingToRemove",{type:e.type}))+" "),t("b",[e._v(e._s(e.safeMachinesToDelete[0].name))])]):t("div",[e._v("\n        "+e._s(e.t("promptScaleMachineDown.attemptingToRemove",{type:e.type,count:e.allToDelete.length},!0))+"\n      ")]),e._v(" "),e.ignored.length?t("div",{staticClass:"retained-machine"},[t("span",{staticClass:"mb-20"},[e._v(e._s(e.t("promptScaleMachineDown.retainedMachine1")))]),e._v(" "),e._l(e.ignored,(function(a){return t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("promptScaleMachineDown.retainedMachine2",{name:a.name},!0),expression:"t('promptScaleMachineDown.retainedMachine2', { name: i.name }, true)"}],key:a.name})}))],2):e._e()])])],2)},r=[],o=a("2909"),c=a("3835"),s=a("1da1"),i=a("a34a"),l=a.n(i),p=(a("96cf"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("4de4"),a("99af"),a("4ec9"),a("c206"),a("477f"),a("97fb"),a("d2af"),a("9f9a"),a("43b3"),a("567a"),a("9c87"),a("094c"),a("a9cd"),a("54ec"),a("4e16"),a("f43e"),a("a630"),a("d81d"),a("7388")),d=a("a788"),u=a("d1d6"),f={components:{GenericPrompt:u["default"]},props:{resources:{type:Array,required:!0}},fetch:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.$store.dispatch("management/findAll",{type:d["e"].MACHINE_DEPLOYMENT}),e.$store.dispatch("management/findAll",{type:d["e"].MACHINE})]);case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e=Array.isArray(this.resources)?this.resources:[this.resources],t=e[0].cluster,a=this.deleteType("isControlPlane",e,t),n=Object(c["a"])(a,2),r=n[0],o=n[1],s=this.deleteType("isEtcd",o,t),i=Object(c["a"])(s,2),l=i[0],p=i[1],d=[r,l].filter((function(e){return!!e}));return{cluster:t,allToDelete:e,safeMachinesToDelete:p,ignored:d,type:this.$store.getters["type-map/labelFor"](e[0].schema,e.length),config:{title:this.t("promptRemove.title"),applyMode:"delete",applyAction:this.remove}}},methods:{deleteType:function(e,t,a){var n=t.reduce((function(t,a){return a[e]?t.typed.push(a):t.others.push(a),t}),{typed:[],others:[]}),r=a.machines.filter((function(t){return t[e]})).length,c=n.typed.length,s=r-c===0?n.typed.pop():void 0,i=[].concat(Object(o["a"])(n.typed),Object(o["a"])(n.others));return[s,i]},remove:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.safeMachinesToDelete.reduce((function(e,t){return e.set(t.pool,e.get(t.pool)||[]),e.get(t.pool).push(t),e}),new Map),n=Array.from(a.entries()),t.next=4,Promise.all(n.map((function(e){var t=Object(c["a"])(e,2),a=t[0],n=t[1];return Promise.all(n.map((function(e){return e.setAnnotation(p["d"].DELETE_MACHINE,"true"),e.save()}))).then((function(){return a.scalePool(-n.length,!1)}))})));case 4:return t.next=6,e.cluster.save();case 6:case"end":return t.stop()}}),t)})))()}}},m=f,h=(a("b187"),a("0c7c")),v=Object(h["a"])(m,n,r,!1,null,"70733c14",null);t["default"]=v.exports},b187:function(e,t,a){"use strict";a("a70e")},d1d6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"prompt-restore",attrs:{"show-highlight-border":!1}},[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.title,expression:"title"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"}),e._v(" "),t("template",{slot:"body"},[e._t("body",(function(){return[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.decodeHtml(e.body),expression:"decodeHtml(body)"}],staticClass:"pl-10 pr-10",staticStyle:{"min-height":"50px",display:"flex"}})]}))],2),e._v(" "),t("div",{staticClass:"bottom",attrs:{slot:"actions"},slot:"actions"},[e._l(e.errors,(function(e,a){return t("Banner",{key:a,attrs:{color:"error",label:e}})})),e._v(" "),t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v("\n        "+e._s(e.t("generic.cancel"))+"\n      ")]),e._v(" "),t("AsyncButton",{attrs:{mode:e.applyMode},on:{click:e.apply}})],1)],2)],2)},r=[],o=a("1da1"),c=a("a34a"),s=a.n(c),i=(a("96cf"),a("67c9")),l=a("d4bf"),p=a("bec1"),d=a("4579"),u=a("2c94"),f={components:{Card:l["a"],AsyncButton:i["b"],Banner:p["a"]},props:{applyAction:{type:Function,default:function(){}},applyMode:{type:String,default:"create"},title:{type:String,default:""},body:{type:String,default:""},confirm:{type:Function,default:function(){}}},data:function(){return{errors:[]}},methods:{decodeHtml:u["f"],close:function(){this.confirm(!1),this.$emit("close",!1)},apply:function(e){var t=this;return Object(o["a"])(s.a.mark((function a(){return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.applyAction(e);case 3:t.confirm(!0),t.$emit("close",!0),a.next=12;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0),t.errors=Object(d["c"])(a.t0),e(!1);case 12:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},m=f,h=(a("e6a0"),a("0c7c")),v=Object(h["a"])(m,n,r,!1,null,"6a47a020",null);t["default"]=v.exports},e6a0:function(e,t,a){"use strict";a("7c9c")}}]);
//# sourceMappingURL=dialog36.47cb8dbf.js.map