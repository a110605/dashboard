(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog6"],{3247:function(e,t,r){var n=r("9a8ac");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("499e").default;a("5e558abc",n,!0,{sourceMap:!1,shadowMode:!1})},5942:function(e,t,r){"use strict";r("3247")},"9a8ac":function(e,t,r){var n=r("4bad");t=n(!1),t.push([e.i,".card-container{border:1px solid var(--border);box-shadow:none}",""]),e.exports=t},"9c38":function(e,t,r){"use strict";r("e3bd")},db55:function(e,t,r){var n=r("4bad");t=n(!1),t.push([e.i,".prompt-rotate[data-v-1ce4d690]{margin:0}.buttons[data-v-1ce4d690]{display:flex;justify-content:flex-end;width:100%}",""]),e.exports=t},e3bd:function(e,t,r){var n=r("db55");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("499e").default;a("462999f4",n,!0,{sourceMap:!1,shadowMode:!1})},ee6f:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"prompt-rotate",attrs:{"show-highlight-border":!1,sticky:!0}},[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("addProjectMemberDialog.title"),expression:"t('addProjectMemberDialog.title')"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"}),e._v(" "),t("div",{staticClass:"pl-10 pr-10",attrs:{slot:"body"},slot:"body"},[e.error?t("Banner",{attrs:{color:"error"}},[e._v("\n      "+e._s(e.error)+"\n    ")]):e._e(),e._v(" "),t("ProjectMemberEditor",{attrs:{"use-two-columns-for-custom":!0},model:{value:e.member,callback:function(t){e.member=t},expression:"member"}})],1),e._v(" "),t("div",{staticClass:"buttons",attrs:{slot:"actions"},slot:"actions"},[t("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v("\n      "+e._s(e.t("generic.cancel"))+"\n    ")]),e._v(" "),e.saveInModal?t("AsyncButton",{attrs:{mode:"create"},on:{click:function(t){return e.saveBindings(t)}}}):t("button",{staticClass:"btn role-primary",on:{click:e.apply}},[e._v("\n      "+e._s(e.t("generic.add"))+"\n    ")])],1)])},a=[],o=r("ade3"),c=r("1da1"),s=r("a34a"),i=r.n(s),l=(r("96cf"),r("ac1f"),r("5319"),r("d81d"),r("e260"),r("d3b7"),r("e6cf"),r("3ca3"),r("ddb0"),r("d4bf")),u=r("4812"),d=r("67c9"),p=r("01ba"),f=r("a788"),m={components:{Card:l["a"],ProjectMemberEditor:u["a"],AsyncButton:d["b"],Banner:p["a"]},props:{resources:{type:Array,required:!0},onAdd:{type:Function,default:function(){}},projectId:{type:String,default:null},saveInModal:{type:Boolean,default:!1}},data:function(){return{member:{permissionGroup:"member",custom:{},principalId:"",roleTemplateIds:[]},error:null}},computed:{principal:function(){var e=this.member.principalId.replace(/\//g,"%2F");return this.$store.dispatch("rancher/find",{type:f["H"].PRINCIPAL,id:this.member.principalId,opt:{url:"/v3/principals/".concat(e)}},{root:!0})}},methods:{principalProperty:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){var r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.principal;case 2:return r=t.sent,t.abrupt("return","group"===(null===r||void 0===r?void 0:r.principalType)?"groupPrincipalId":"userPrincipalId");case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.$emit("close")},apply:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.createBindings();case 3:t.t1=t.sent,t.t0.onAdd.call(t.t0,t.t1),e.close();case 6:case"end":return t.stop()}}),t)})))()},createBindings:function(){var e=this;return Object(c["a"])(i.a.mark((function t(){var r,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.principalProperty();case 2:return r=t.sent,n=e.member.roleTemplateIds.map((function(t){var n;return e.$store.dispatch("rancher/create",(n={type:f["H"].PROJECT_ROLE_TEMPLATE_BINDING,roleTemplateId:t},Object(o["a"])(n,r,e.member.principalId),Object(o["a"])(n,"projectId",e.projectId),n))})),t.abrupt("return",Promise.all(n));case 5:case"end":return t.stop()}}),t)})))()},saveBindings:function(e){var t=this;this.error=null,this.createBindings().then((function(e){return Promise.all(e.map((function(e){return e.save()})))})).then((function(){e(!0),setTimeout(t.close,500)})).catch((function(r){t.error=r,e(!1)}))}}},b=m,v=(r("9c38"),r("5942"),r("0c7c")),h=Object(v["a"])(b,n,a,!1,null,"1ce4d690",null);t["default"]=h.exports}}]);
//# sourceMappingURL=dialog6.89db49a5.js.map